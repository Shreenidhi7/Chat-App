'use strict'

const { range } = require('./util')

/**
 * A.1 Unassigned code points in Unicode 3.2
 * @link https://tools.ietf.org/html/rfc3454#appendix-A.1
 */
const unassigned_code_points = new Set([
  0x0221,
  ...range(0x0234, 0x024F),
  ...range(0x02AE, 0x02AF),
  ...range(0x02EF, 0x02FF),
  ...range(0x0350, 0x035F),
  ...range(0x0370, 0x0373),
  ...range(0x0376, 0x0379),
  ...range(0x037B, 0x037D),
  ...range(0x037F, 0x0383),
  0x038B,
  0x038D,
  0x03A2,
  0x03CF,
  ...range(0x03F7, 0x03FF),
  0x0487,
  0x04CF,
  ...range(0x04F6, 0x04F7),
  ...range(0x04FA, 0x04FF),
  ...range(0x0510, 0x0530),
  ...range(0x0557, 0x0558),
  0x0560,
  0x0588,
  ...range(0x058B, 0x0590),
  0x05A2,
  0x05BA,
  ...range(0x05C5, 0x05CF),
  ...range(0x05EB, 0x05EF),
  ...range(0x05F5, 0x060B),
  ...range(0x060D, 0x061A),
  ...range(0x061C, 0x061E),
  0x0620,
  ...range(0x063B, 0x063F),
  ...range(0x0656, 0x065F),
  ...range(0x06EE, 0x06EF),
  0x06FF,
  0x070E,
  ...range(0x072D, 0x072F),
  ...range(0x074B, 0x077F),
  ...range(0x07B2, 0x0900),
  0x0904,
  ...range(0x093A, 0x093B),
  ...range(0x094E, 0x094F),
  ...range(0x0955, 0x0957),
  ...range(0x0971, 0x0980),
  0x0984,
  ...range(0x098D, 0x098E),
  ...range(0x0991, 0x0992),
  0x09A9,
  0x09B1,
  ...range(0x09B3, 0x09B5),
  ...range(0x09BA, 0x09BB),
  0x09BD,
  ...range(0x09C5, 0x09C6),
  ...range(0x09C9, 0x09CA),
  ...range(0x09CE, 0x09D6),
  ...range(0x09D8, 0x09DB),
  0x09DE,
  ...range(0x09E4, 0x09E5),
  ...range(0x09FB, 0x0A01),
  ...range(0x0A03, 0x0A04),
  ...range(0x0A0B, 0x0A0E),
  ...range(0x0A11, 0x0A12),
  0x0A29,
  0x0A31,
  0x0A34,
  0x0A37,
  ...range(0x0A3A, 0x0A3B),
  0x0A3D,
  ...range(0x0A43, 0x0A46),
  ...range(0x0A49, 0x0A4A),
  ...range(0x0A4E, 0x0A58),
  0x0A5D,
  ...range(0x0A5F, 0x0A65),
  ...range(0x0A75, 0x0A80),
  0x0A84,
  0x0A8C,
  0x0A8E,
  0x0A92,
  0x0AA9,
  0x0AB1,
  0x0AB4,
  ...range(0x0ABA, 0x0ABB),
  0x0AC6,
  0x0ACA,
  ...range(0x0ACE, 0x0ACF),
  ...range(0x0AD1, 0x0ADF),
  ...range(0x0AE1, 0x0AE5),
  ...range(0x0AF0, 0x0B00),
  0x0B04,
  ...range(0x0B0D, 0x0B0E),
  ...range(0x0B11, 0x0B12),
  0x0B29,
  0x0B31,
  ...range(0x0B34, 0x0B35),
  ...range(0x0B3A, 0x0B3B),
  ...range(0x0B44, 0x0B46),
  ...range(0x0B49, 0x0B4A),
  ...range(0x0B4E, 0x0B55),
  ...range(0x0B58, 0x0B5B),
  0x0B5E,
  ...range(0x0B62, 0x0B65),
  ...range(0x0B71, 0x0B81),
  0x0B84,
  ...range(0x0B8B, 0x0B8D),
  0x0B91,
  ...range(0x0B96, 0x0B98),
  0x0B9B,
  0x0B9D,
  ...range(0x0BA0, 0x0BA2),
  ...range(0x0BA5, 0x0BA7),
  ...range(0x0BAB, 0x0BAD),
  0x0BB6,
  ...range(0x0BBA, 0x0BBD),
  ...range(0x0BC3, 0x0BC5),
  0x0BC9,
  ...range(0x0BCE, 0x0BD6),
  ...range(0x0BD8, 0x0BE6),
  ...range(0x0BF3, 0x0C00),
  0x0C04,
  0x0C0D,
  0x0C11,
  0x0C29,
  0x0C34,
  ...range(0x0C3A, 0x0C3D),
  0x0C45,
  0x0C49,
  ...range(0x0C4E, 0x0C54),
  ...range(0x0C57, 0x0C5F),
  ...range(0x0C62, 0x0C65),
  ...range(0x0C70, 0x0C81),
  0x0C84,
  0x0C8D,
  0x0C91,
  0x0CA9,
  0x0CB4,
  ...range(0x0CBA, 0x0CBD),
  0x0CC5,
  0x0CC9,
  ...range(0x0CCE, 0x0CD4),
  ...range(0x0CD7, 0x0CDD),
  0x0CDF,
  ...range(0x0CE2, 0x0CE5),
  ...range(0x0CF0, 0x0D01),
  0x0D04,
  0x0D0D,
  0x0D11,
  0x0D29,
  ...range(0x0D3A, 0x0D3D),
  ...range(0x0D44, 0x0D45),
  0x0D49,
  ...range(0x0D4E, 0x0D56),
  ...range(0x0D58, 0x0D5F),
  ...range(0x0D62, 0x0D65),
  ...range(0x0D70, 0x0D81),
  0x0D84,
  ...range(0x0D97, 0x0D99),
  0x0DB2,
  0x0DBC,
  ...range(0x0DBE, 0x0DBF),
  ...range(0x0DC7, 0x0DC9),
  ...range(0x0DCB, 0x0DCE),
  0x0DD5,
  0x0DD7,
  ...range(0x0DE0, 0x0DF1),
  ...range(0x0DF5, 0x0E00),
  ...range(0x0E3B, 0x0E3E),
  ...range(0x0E5C, 0x0E80),
  0x0E83,
  ...range(0x0E85, 0x0E86),
  0x0E89,
  ...range(0x0E8B, 0x0E8C),
  ...range(0x0E8E, 0x0E93),
  0x0E98,
  0x0EA0,
  0x0EA4,
  0x0EA6,
  ...range(0x0EA8, 0x0EA9),
  0x0EAC,
  0x0EBA,
  ...range(0x0EBE, 0x0EBF),
  0x0EC5,
  0x0EC7,
  ...range(0x0ECE, 0x0ECF),
  ...range(0x0EDA, 0x0EDB),
  ...range(0x0EDE, 0x0EFF),
  0x0F48,
  ...range(0x0F6B, 0x0F70),
  ...range(0x0F8C, 0x0F8F),
  0x0F98,
  0x0FBD,
  ...range(0x0FCD, 0x0FCE),
  ...range(0x0FD0, 0x0FFF),
  0x1022,
  0x1028,
  0x102B,
  ...range(0x1033, 0x1035),
  ...range(0x103A, 0x103F),
  ...range(0x105A, 0x109F),
  ...range(0x10C6, 0x10CF),
  ...range(0x10F9, 0x10FA),
  ...range(0x10FC, 0x10FF),
  ...range(0x115A, 0x115E),
  ...range(0x11A3, 0x11A7),
  ...range(0x11FA, 0x11FF),
  0x1207,
  0x1247,
  0x1249,
  ...range(0x124E, 0x124F),
  0x1257,
  0x1259,
  ...range(0x125E, 0x125F),
  0x1287,
  0x1289,
  ...range(0x128E, 0x128F),
  0x12AF,
  0x12B1,
  ...range(0x12B6, 0x12B7),
  0x12BF,
  0x12C1,
  ...range(0x12C6, 0x12C7),
  0x12CF,
  0x12D7,
  0x12EF,
  0x130F,
  0x1311,
  ...range(0x1316, 0x1317),
  0x131F,
  0x1347,
  ...range(0x135B, 0x1360),
  ...range(0x137D, 0x139F),
  ...range(0x13F5, 0x1400),
  ...range(0x1677, 0x167F),
  ...range(0x169D, 0x169F),
  ...range(0x16F1, 0x16FF),
  0x170D,
  ...range(0x1715, 0x171F),
  ...range(0x1737, 0x173F),
  ...range(0x1754, 0x175F),
  0x176D,
  0x1771,
  ...range(0x1774, 0x177F),
  ...range(0x17DD, 0x17DF),
  ...range(0x17EA, 0x17FF),
  0x180F,
  ...range(0x181A, 0x181F),
  ...range(0x1878, 0x187F),
  ...range(0x18AA, 0x1DFF),
  ...range(0x1E9C, 0x1E9F),
  ...range(0x1EFA, 0x1EFF),
  ...range(0x1F16, 0x1F17),
  ...range(0x1F1E, 0x1F1F),
  ...range(0x1F46, 0x1F47),
  ...range(0x1F4E, 0x1F4F),
  0x1F58,
  0x1F5A,
  0x1F5C,
  0x1F5E,
  ...range(0x1F7E, 0x1F7F),
  0x1FB5,
  0x1FC5,
  ...range(0x1FD4, 0x1FD5),
  0x1FDC,
  ...range(0x1FF0, 0x1FF1),
  0x1FF5,
  0x1FFF,
  ...range(0x2053, 0x2056),
  ...range(0x2058, 0x205E),
  ...range(0x2064, 0x2069),
  ...range(0x2072, 0x2073),
  ...range(0x208F, 0x209F),
  ...range(0x20B2, 0x20CF),
  ...range(0x20EB, 0x20FF),
  ...range(0x213B, 0x213C),
  ...range(0x214C, 0x2152),
  ...range(0x2184, 0x218F),
  ...range(0x23CF, 0x23FF),
  ...range(0x2427, 0x243F),
  ...range(0x244B, 0x245F),
  0x24FF,
  ...range(0x2614, 0x2615),
  0x2618,
  ...range(0x267E, 0x267F),
  ...range(0x268A, 0x2700),
  0x2705,
  ...range(0x270A, 0x270B),
  0x2728,
  0x274C,
  0x274E,
  ...range(0x2753, 0x2755),
  0x2757,
  ...range(0x275F, 0x2760),
  ...range(0x2795, 0x2797),
  0x27B0,
  ...range(0x27BF, 0x27CF),
  ...range(0x27EC, 0x27EF),
  ...range(0x2B00, 0x2E7F),
  0x2E9A,
  ...range(0x2EF4, 0x2EFF),
  ...range(0x2FD6, 0x2FEF),
  ...range(0x2FFC, 0x2FFF),
  0x3040,
  ...range(0x3097, 0x3098),
  ...range(0x3100, 0x3104),
  ...range(0x312D, 0x3130),
  0x318F,
  ...range(0x31B8, 0x31EF),
  ...range(0x321D, 0x321F),
  ...range(0x3244, 0x3250),
  ...range(0x327C, 0x327E),
  ...range(0x32CC, 0x32CF),
  0x32FF,
  ...range(0x3377, 0x337A),
  ...range(0x33DE, 0x33DF),
  0x33FF,
  ...range(0x4DB6, 0x4DFF),
  ...range(0x9FA6, 0x9FFF),
  ...range(0xA48D, 0xA48F),
  ...range(0xA4C7, 0xABFF),
  ...range(0xD7A4, 0xD7FF),
  ...range(0xFA2E, 0xFA2F),
  ...range(0xFA6B, 0xFAFF),
  ...range(0xFB07, 0xFB12),
  ...range(0xFB18, 0xFB1C),
  0xFB37,
  0xFB3D,
  0xFB3F,
  0xFB42,
  0xFB45,
  ...range(0xFBB2, 0xFBD2),
  ...range(0xFD40, 0xFD4F),
  ...range(0xFD90, 0xFD91),
  ...range(0xFDC8, 0xFDCF),
  ...range(0xFDFD, 0xFDFF),
  ...range(0xFE10, 0xFE1F),
  ...range(0xFE24, 0xFE2F),
  ...range(0xFE47, 0xFE48),
  0xFE53,
  0xFE67,
  ...range(0xFE6C, 0xFE6F),
  0xFE75,
  ...range(0xFEFD, 0xFEFE),
  0xFF00,
  ...range(0xFFBF, 0xFFC1),
  ...range(0xFFC8, 0xFFC9),
  ...range(0xFFD0, 0xFFD1),
  ...range(0xFFD8, 0xFFD9),
  ...range(0xFFDD, 0xFFDF),
  0xFFE7,
  ...range(0xFFEF, 0xFFF8),
  ...range(0x10000, 0x102FF),
  0x1031F,
  ...range(0x10324, 0x1032F),
  ...range(0x1034B, 0x103FF),
  ...range(0x10426, 0x10427),
  ...range(0x1044E, 0x1CFFF),
  ...range(0x1D0F6, 0x1D0FF),
  ...range(0x1D127, 0x1D129),
  ...range(0x1D1DE, 0x1D3FF),
  0x1D455,
  0x1D49D,
  ...range(0x1D4A0, 0x1D4A1),
  ...range(0x1D4A3, 0x1D4A4),
  ...range(0x1D4A7, 0x1D4A8),
  0x1D4AD,
  0x1D4BA,
  0x1D4BC,
  0x1D4C1,
  0x1D4C4,
  0x1D506,
  ...range(0x1D50B, 0x1D50C),
  0x1D515,
  0x1D51D,
  0x1D53A,
  0x1D53F,
  0x1D545,
  ...range(0x1D547, 0x1D549),
  0x1D551,
  ...range(0x1D6A4, 0x1D6A7),
  ...range(0x1D7CA, 0x1D7CD),
  ...range(0x1D800, 0x1FFFD),
  ...range(0x2A6D7, 0x2F7FF),
  ...range(0x2FA1E, 0x2FFFD),
  ...range(0x30000, 0x3FFFD),
  ...range(0x40000, 0x4FFFD),
  ...range(0x50000, 0x5FFFD),
  ...range(0x60000, 0x6FFFD),
  ...range(0x70000, 0x7FFFD),
  ...range(0x80000, 0x8FFFD),
  ...range(0x90000, 0x9FFFD),
  ...range(0xA0000, 0xAFFFD),
  ...range(0xB0000, 0xBFFFD),
  ...range(0xC0000, 0xCFFFD),
  ...range(0xD0000, 0xDFFFD),
  0xE0000,
  ...range(0xE0002, 0xE001F),
  ...range(0xE0080, 0xEFFFD),
])

/**
 * B.1 Commonly mapped to nothing
 * @link https://tools.ietf.org/html/rfc3454#appendix-B.1
 */
const commonly_mapped_to_nothing = new Set([
  0x00AD,
  0x034F,
  0x1806,
  0x180B,
  0x180C,
  0x180D,
  0x200B,
  0x200C,
  0x200D,
  0x2060,
  0xFE00,
  0xFE01,
  0xFE02,
  0xFE03,
  0xFE04,
  0xFE05,
  0xFE06,
  0xFE07,
  0xFE08,
  0xFE09,
  0xFE0A,
  0xFE0B,
  0xFE0C,
  0xFE0D,
  0xFE0E,
  0xFE0F,
  0xFEFF,
])

/**
 * C.1.2 Non-ASCII space characters
 * @link https://tools.ietf.org/html/rfc3454#appendix-C.1.2
 */
const non_ASCII_space_characters = new Set([
  0x00a0 /* NO-BREAK SPACE */,
  0x1680 /* OGHAM SPACE MARK */,
  0x2000 /* EN QUAD */,
  0x2001 /* EM QUAD */,
  0x2002 /* EN SPACE */,
  0x2003 /* EM SPACE */,
  0x2004 /* THREE-PER-EM SPACE */,
  0x2005 /* FOUR-PER-EM SPACE */,
  0x2006 /* SIX-PER-EM SPACE */,
  0x2007 /* FIGURE SPACE */,
  0x2008 /* PUNCTUATION SPACE */,
  0x2009 /* THIN SPACE */,
  0x200a /* HAI